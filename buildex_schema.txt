#Schema for CS192 Project: Experiment Builder

#Primary Entities
TABLE Users:
	uid: integer PRIMARY AUTOINCREMENT
	username: character varying(32) UNIQUE
	password: character varying(128)
	first_name: character varying(32)
	middle_name: character varying(32)
	last_name: character varying(32)
	email_ad: character varying(32)
	temp_password: character varying(128)

TABLE Admins:
	uid: references Users.uid
	aid: integer PRIMARY AUTOINCREMENT

TABLE LaboratoryHeads:
	uid: references Users.uid
	lid: integer PRIMARY AUTOINCREMENT

TABLE Faculty:
	uid: references Users.uid
	fid: integer PRIMARY AUTOINCREMENT
	faculty_num: integer UNIQUE
	account_status: boolean #{Admin Confirmed[true], Not Confirmed[false]}

TABLE Graduates:
	uid: references Users.uid
	gid: integer PRIMARY AUTOINCREMENT
	student_num: integer UNIQUE
	account_status: boolean #{Admin Confirmed[true], Not Confirmed[false]}

TABLE Laboratories:
	labid: integer PRIMARY AUTOINCREMENT
	name: character varying(32) UNIQUE
	members_count: integer
	description: character varying
	since: date

TABLE Experiments:
	eid: integer PRIMARY AUTOINCREMENT
	title: character varying(64)
	category: character varying(32)
	description: character varying(256)
	target_count: integer
	current_count: integer
	status: boolean #{COMtextinputPLETE[true],ONGOING[false]}
	is_published: boolean #{Faculty Confirmed[true], Not Confirmed[false]}
	url: character varying(128)

TABLE advise:
	fid: integer references Faculty.fid
	status: boolean #{Faculty
	confirmed[true],not confirmed[false]}

TABLE faculty_conduct:
	fid: integer references Faculty.fid
	eid: integer references Experiments.eid
	since: date

TABLE graduates_conduct:
	gid: integer references Graduates.gid
	eid: integer references Experiments.eid
	since: date

TABLE manage:
	lid: integer references LaboratoryHeads.lid
	labid: integer references Laboratories.labid
	since: date

TABLE faculty_member_of:
	fid: references Faculty.fid
	labid: references Laboratories.labid
	since: date
	status: boolean #{LabHead confirmed[true],not confirmed[false]}

TABLE graduates_member_of:
	gid: references Graduates.gid
	labid: references Laboratories.labid
	since: date
	status: boolean #{LabHead confirmed[true],not confirmed[false]}

#End of Primary Entities

#Form Maker
TABLE ProfileFields:
	eid: integer references Experiments.eid
	pfid: integer PRIMARY AUTOINCREMENT
	name: character varying(128) #item name
	label: character varying(256) #actual text
	type: character varying(64) #{text-input,text-area,dropdown,radio-button,checkboxes}
	helper: character varying(64)

TABLE TextInputs:
	pfid: integer references ProfileFields.pfid
	tid: integer PRIMARY AUTOINCREMENT
	size: character varying(16) {tiny small medium large}
	placeholder: character varying(128)

TABLE TextAreas:
	pfid: integer references ProfileFields.pfid
	tid: integer PRIMARY AUTOINCREMENT
	size: character varying(16) {tiny small medium large}
	placeholder: character varying(128)

/*
TABLE Dropdowns:
	pfid: integer references ProfileFields.pfid
	did: integer PRIMARY AUTOINCREMENT
	options: character varying(256)
*/
#End of Form Maker

#Experiment Builder
TABLE Pages:
	eid: integer references Experiments.eid
	pid: integer PRIMARY AUTOINCREMENT
	order: integer
	template: integer #{Form maker[0],Text-only,[1],Comparison Stimulus[2]}
	row: integer #only significant if template is text and images
	column: integer #only significant if template is text and images

TABLE Questions:
	pid: integer references Page.pid
	qid: integer PRIMARY AUTOINCREMENT
	label: character varying(256)
	is_required: boolean #{REQUIRED[true], NOT REQUIRED[false]}
	x_pos: double precision
	y_pos: double precision

TABLE OptionGroups:
	qid: integer references Questions.qid
	ogid: integer PRIMARY AUTOINCREMENT
	type: integer #{TEXT BOX[0],RADIO BUTTONS[1],MULTIPLE CHOICE[2],DROPDOWN[3]}
	x_pos: double precision
	y_pos: double precision

TABLE Options:
	ogid: integer references OptionGroups.ogid
	oid: integer PRIMARY AUTOINCREMENT
	label: character varying(32)
#End of Experiment Builder

#Respondents
TABLE Respondents:
	rid: int(11) PRIMARY AUTOINCREMENT
	eid: integer references Experiments.eid
	since: date
	duration: time

TABLE Responses:
	rid: integer references Respondents.rid
	ans_id: integer PRIMARY AUTOINCREMENT
	qid: integer references Questions.qid
	oid: integer references Options.oid
	free_answer: character varying
	duration: time
#End of Respondents